<nav nav-type="search" />
<view class="home-container">
  <view class="home-content">
    <t-tabs defaultValue="recommend" bind:change="onTabChange">
      <t-tab-panel label="Êó∂Èó¥ËΩ¥" value="recommend">
        <!-- <t-pull-down-refresh
          value="{{enable}}"
          bind:refresh="onRefresh"
          loadingTexts="{{['‰∏ãÊãâÂà∑Êñ∞', 'ÊùæÊâãÂà∑Êñ∞', 'Ê≠£Âú®Âà∑Êñ∞', 'Âà∑Êñ∞ÂÆåÊàê']}}"
        >
          <view class="home-card-list" >
            <t-swiper
              list="{{swiperList}}"
              navigation="{{ { type: 'dots-bar' } }}"
              height="488rpx"
              style="width: 340rpx"
            />
            <card
              wx:for="{{cardInfo}}"
              wx:key="index"
              desc="{{item.desc}}"
              url="{{item.url}}"
              tags="{{item.tags}}"
            />
          </view>
        </t-pull-down-refresh> -->
        <view class="timeline">
          <!-- ‚úÖ Á©∫Áä∂ÊÄÅ -->
          <view wx:if="{{!weeks || weeks.length === 0}}" class="timeline-empty">
            <view class="empty-icon">üï∞Ô∏è</view>
            <view class="empty-title">Â∞öÊó†Êó∂Èó¥ËΩ¥</view>
            <view class="empty-desc">ËÆ∞ÂΩï‰Ω†ÁöÑÁ¨¨‰∏ÄÂ§©ÔºåÊó∂Èó¥Êâç‰ºöÂºÄÂßãÊµÅÂä®</view>

            <!-- <t-button
              theme="primary"
              shape="round"
              size="medium"
              bindtap="goRelease"
            >
              Á´ãÂç≥ÂèëÂ∏É
            </t-button> -->
          </view>

          <!-- ‚úÖ Ê≠£Â∏∏Êó∂Èó¥ËΩ¥ -->
          <block wx:else>
            <!-- Âë® -->
            <block wx:for="{{weeks}}" wx:key="weekLabel">
              <view class="week-header">
                {{item.weekLabel}}Ôºà{{item.weekStart}} ~ {{item.weekEnd}}Ôºâ
              </view>

              <!-- Â§© -->
              <block wx:for="{{item.days}}" wx:key="date">
                <view class="timeline-row">

                  <!-- Â∑¶‰æßÂÜÖÂÆπ -->
                  <view class="side left">
                    <block wx:if="{{index % 2 === 0}}">
                      <view class="card" 
                      bindtap="goDayDetail" data-day-id="{{item._id}}">
                        <view class="card-title">{{item.dayLabel}}</view>
                        <view class="desc">{{item.summary}}</view>
                        <block wx:for="{{item.events}}" wx:key="_id">
                          <view class="card-item"
                                          >
                            <view class="title">{{item.title}}</view>
                            <view class="desc">{{item.description}}</view>
                          </view>
                        </block>
                      </view>
                    </block>
                  </view>

                  <!-- ‰∏≠ËΩ¥ -->
                  <view class="axis">
                    <view class="line"></view>
                    <view class="dot">
                      <view class="date">{{item.date}}</view>
                    </view>
                  </view>

                  <!-- Âè≥‰æßÂÜÖÂÆπ -->
                  <view class="side right">
                    <block wx:if="{{index % 2 === 1}}">
                      <view class="card"
                      bindtap="goDayDetail" data-day-id="{{item._id}}">
                        <view class="card-title">{{item.dayLabel}}</view>
                        <view class="desc">{{item.summary}}</view>
                        <block wx:for="{{item.events}}" wx:key="_id">
                          <view class="card-item"
                        >        
                            <view class="title">{{item.title}}</view>
                            <view class="desc">{{item.description}}</view>
                          </view>
                        </block>
                      </view>
                    </block>
                  </view>

                </view>
              </block>

            </block>
          </block>
        </view>
      </t-tab-panel>
   
      <t-tab-panel label="ÊàëÁöÑÂÖ≥Ê≥®" value="follow">
        <view class="home-card-list">

          <block wx:if="{{followTimelines.length}}">
            <view
              class="focus-card"
              wx:for="{{followTimelines}}"
              wx:key="_id"
              bindtap="goTimeline"
              data-id="{{item._id}}"
            >
              <view class="title">{{item.title}}</view>

              <view class="desc">
                {{item.description || 'ÊöÇÊó†ÁÆÄ‰ªã'}}
              </view>

              <view class="meta">
                <text class="role">
                  {{item.role === 'editor' ? 'Âçè‰ΩúËÄÖ' : 'Â∑≤ÂÖ≥Ê≥®'}}
                </text>
                <!-- <text class="count">
                  {{item.memberCount}} ‰∫∫
                </text> -->
              </view>

              <view wx:if="{{item.latestDay}}" class="latest">
                ÊúÄËøëÊõ¥Êñ∞Ôºö{{item.latestDay.summary}}
              </view>
            </view>
          </block>

          <view wx:else class="empty">
            <text>‰Ω†ËøòÊ≤°ÊúâÂÖ≥Ê≥®‰ªª‰ΩïÊó∂Èó¥ËΩ¥</text>
          </view>
        
        </view>
      </t-tab-panel>
    </t-tabs>
  </view>
</view>

<view class="home-release">
  <t-button theme="primary" size="large" icon="add" shape="round" bindtap="goRelease">
    ÂèëÂ∏É
  </t-button>
</view>
<t-message id="t-message" />